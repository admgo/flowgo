name: DSL-template
version: 1.0.0
# 该流程实例的全局变量
variables:
  orderId:
    type: string
    required: false
    value: test
  total:
    type: number
    required: false
    value: 1
formKey: test-form # 该流程实例关联的表单，这里关联的是全局表单
timeout: 300 # 超时时间，限定该流程超过多少就标记为超时，单位s，小于0时表示该流程没有超时限制
status: inProcess # 该流程实例当前状态，InProcess | Pending | Canceled | Failed | Completed | Suspend

events:
- name: start # 开始节点名称
  id: start # 开始节点ID
  position:
    x: 121.2
    y: 333.9

- name: end # 结束节点
  id: end # 结束节点ID
  position:
    x: 121.2
    y: 333.9

nodes:
- name: node-1 # 节点名称
  id: node-1 # 节点ID
  formKey: node-1 # 节点关联的表单
  attributes:
    # 每个不同类型的流程实例节点的额外配置
    assignee: userID # 标记分配人
  variables:
    # 该流程实例的节点内变量
    orderId:
      type: string
      required: false
      value: test
    total:
      type: number
      required: false
      value: 1
  position:
    x: 121.2
    y: 333.9
  timeout: 300 # 超时时间，限定该流程超过多少就标记为超时，单位s，小于0时表示该流程没有超时限制
  status: inProcess # 该流程实例节点当前状态，InProcess | Pending | Canceled | Failed | Completed | Suspend | Skipped
  type: userTask # 标记该流程实例的类型 emailTask | userTask | scriptTask | serviceTask | aiTask | httpTask

- name: node-2 # 节点名称
  id: node-2 # 节点ID
  formKey: node-2 # 节点关联的表单
  attributes:
    # 每个不同类型的流程实例节点的额外配置
    to: [ 'xxx@example.com', 'xxx@example.com', '${assignee.leader}' ] # 收件人（必填）
    from: xxx@example.com # 发件人
    subject: Test # 主题
    cc: [ 'xxx@example.com', 'xxx@example.com' ] # 抄送
    bcc: [ 'xxx@example.com', 'xxx@example.com' ] # 密码抄送
    text: 'hello world' # 邮件的内容，纯文本格式
    html: "hello ${assignee.leader}" # 邮件的内容，html格式，支持变量插入
  variables:
    orderId:
      type: string
      required: false
      value: test
    total:
      type: number
      required: false
      value: 1
  position:
    x: 121.2
    y: 333.9
  timeout: 300 # 超时时间，限定该流程超过多少就标记为超时，单位s，小于0时表示该流程没有超时限制
  status: inProcess # 该流程实例节点当前状态，InProcess | Pending | Canceled | Failed | Completed | Suspend | Skipped
  type: emailTask # 标记该流程实例的类型 emailTask | userTask | scriptTask | serviceTask | aiTask | httpTask

edges:
- name: edge-1
  id: edge-1
  source: start
  target: node-1

- name: edge-2
  id: edge-2
  source: node-1
  target: node-2

- name: edge-3
  id: edge-3
  source: node-2
  target: node-3

- name: edge-4
  id: edge-4
  source: node-3
  target: end
